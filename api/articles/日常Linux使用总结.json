{"title":"日常Linux操作总结","uid":"27744e614f7ee333f0c3a9e11c89d431","slug":"日常Linux使用总结","date":"2022-01-27T07:58:57.000Z","updated":"2022-02-08T07:19:17.996Z","comments":true,"path":"api/articles/日常Linux使用总结.json","keywords":null,"cover":"https://tianmy.oss-cn-shanghai.aliyuncs.com/img/Linux.jpg","content":"<h1 id=\"常用场景\"><a href=\"#常用场景\" class=\"headerlink\" title=\"常用场景\"></a>常用场景</h1><p>包括：</p>\n<ul>\n<li>1、查看Linux的版本、cpu、内存、磁盘等信息</li>\n<li>2、查看磁盘占用，查找文件和目录，处理大文件</li>\n<li>3、处理日志</li>\n<li>4、端口、进程相关操作</li>\n<li>5、crontab定时任务</li>\n<li>6、自定义快捷命令</li>\n<li>7、常见环境配置：防火墙、免登陆、yum、时间、JDK等</li>\n<li>8、其他提高效率的命令</li>\n</ul>\n<h2 id=\"1-查看基础信息\"><a href=\"#1-查看基础信息\" class=\"headerlink\" title=\"1.查看基础信息\"></a>1.查看基础信息</h2><h3 id=\"查看系统信息\"><a href=\"#查看系统信息\" class=\"headerlink\" title=\"查看系统信息\"></a>查看系统信息</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 查看CentOS系统版本号\ncat &#x2F;etc&#x2F;centos-release\n#查看所有linux发行版\ncat &#x2F;etc&#x2F;issue\n# 查看系统内核\n##方式一\ncat &#x2F;proc&#x2F;version\n##方式二\nuname -r\n# 查看系统位数\ngetconf LONG_BIT</code></pre>\n<h3 id=\"查看CPU信息\"><a href=\"#查看CPU信息\" class=\"headerlink\" title=\"查看CPU信息\"></a>查看CPU信息</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 查看cpu核心、内存，磁盘等信息\n#查看cpu物理个数\ngrep &#39;physical id&#39; &#x2F;proc&#x2F;cpuinfo | sort -u | wc -l1\n#查看cpu核心数\ngrep &#39;core id&#39; &#x2F;proc&#x2F;cpuinfo | sort -u | wc -l4\n#查看cpu逻辑核数\n#查看cpu线程数\ngrep &#39;processor&#39; &#x2F;proc&#x2F;cpuinfo | sort -u | wc -l4\n#查看cpu型号\ncat &#x2F;proc&#x2F;cpuinfo | grep name | sort | uniq</code></pre>\n<h3 id=\"查看内存\"><a href=\"#查看内存\" class=\"headerlink\" title=\"查看内存\"></a>查看内存</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">free\n#查询内存\nfree -m\n#每隔3秒查一次内存\nfree -s 3</code></pre>\n<h2 id=\"2-处理磁盘、大文件\"><a href=\"#2-处理磁盘、大文件\" class=\"headerlink\" title=\"2.处理磁盘、大文件\"></a>2.处理磁盘、大文件</h2><h3 id=\"2-1-使用的命令\"><a href=\"#2-1-使用的命令\" class=\"headerlink\" title=\"2-1.使用的命令\"></a>2-1.使用的命令</h3><h4 id=\"find命令查找目录和文件\"><a href=\"#find命令查找目录和文件\" class=\"headerlink\" title=\"find命令查找目录和文件\"></a>find命令查找目录和文件</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 常用参数：\n-type: 文件类型，d 目录 f 文件\n-name: 名称 通配符：&quot;*.*&quot; 文件名称:文件后缀\n-iname: 名称不区分大小写\n-size: 文件&#x2F;目录大小\n-mtime: 按照文件的修改时间来查找文件 \n    -n：表示更改文件的时间距现在 n 天以内 \n    +n：表示更改文件的时间距现在 n 天以前\n    n：距现在第 n 天\n# 执行参数：\n-exec： find的结果作为exec的入参\n-ok：功能同-exec，区别是在请求之前询问是否执行，输入y执行\n# 查询所有目录下所有大于50M的文件\nfind &#x2F; -size +50M -exec ls -lh &#123;&#125; \\;\n# 查找所有目录下jmx类型的文件\nfind &#x2F; -type f -name &quot;*.jmx&quot; -exec ls -lh &#123;&#125; \\;\n# 查找指定目录下文件名为test的文件，不区分大小写\nfind &#x2F;&#123;dir&#125; -type f -iname &quot;test&quot; -exec ls -lh &#123;&#125; \\;\n# 查找指定目录下不为test的文件\nfind &#x2F;&#123;dir&#125; -type f !-name &quot;test&quot; -exec ls -lh &#123;&#125; \\;\n#查找当前目录下5天内修改过的log文件\nfind . -mtime -5 -name &quot;*.log&quot;</code></pre>\n<h5 id=\"与正则配合使用\"><a href=\"#与正则配合使用\" class=\"headerlink\" title=\"与正则配合使用\"></a>与正则配合使用</h5><pre class=\"line-numbers language-none\"><code class=\"language-none\">#\n</code></pre>\n\n<h4 id=\"du命令查看目录和文件的磁盘使用空间\"><a href=\"#du命令查看目录和文件的磁盘使用空间\" class=\"headerlink\" title=\"du命令查看目录和文件的磁盘使用空间\"></a>du命令查看目录和文件的磁盘使用空间</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 常用参数：\n-k: 以KB单位显示\n-m: 以MB单位显示\n-h: 以K M G为单位显示，提高可读性\n--max-depth: 显示层级\n-s: 显示总和\n-c: 对结果进行统计\n-S: 排除子目录\n# 查看&#x2F;opt目录下的目录和文件大小并按文件从大到小排序\ndu -h --max-depth&#x3D;1 &#x2F;opt&#x2F; | sort</code></pre>\n<h4 id=\"df命令查看磁盘中的可用空间\"><a href=\"#df命令查看磁盘中的可用空间\" class=\"headerlink\" title=\"df命令查看磁盘中的可用空间\"></a>df命令查看磁盘中的可用空间</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 常用参数\n-a: 查看所有文件系统的磁盘占用，单位默认KB\n-h: 以K M G为单位显示，注意：这里的1k&#x3D;1000byte,1m&#x3D;1000k</code></pre>\n<h4 id=\"sort排序\"><a href=\"#sort排序\" class=\"headerlink\" title=\"sort排序\"></a>sort排序</h4><p>以默认的方式将文本文件的第一列以 ASCII 码的次序排列</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#常用参数：\n-u: 排序后去除重复行\n-n: 按照数值排序\n-r: 按降序排序，sort默认升序排序\n-t: 指定分隔符\n-k: 指定列数，与-t配合使用\n#当前目录下的文件按照文件大小排序\nls -lh | sort -n -k 5</code></pre>\n<h4 id=\"uniq去重\"><a href=\"#uniq去重\" class=\"headerlink\" title=\"uniq去重\"></a>uniq去重</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#常用参数\n-c: 去重并在第一列显示每一行重复的次数</code></pre>\n\n<h3 id=\"2-2-场景\"><a href=\"#2-2-场景\" class=\"headerlink\" title=\"2-2.场景\"></a>2-2.场景</h3><h4 id=\"1、当前磁盘满了，需要定位大文件并删除\"><a href=\"#1、当前磁盘满了，需要定位大文件并删除\" class=\"headerlink\" title=\"1、当前磁盘满了，需要定位大文件并删除\"></a>1、当前磁盘满了，需要定位大文件并删除</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#1、查看自盘占用\ndf -h\n#2、进入磁盘占用大的目录找到大文件\ndu -h --max-depth&#x3D;1 &#x2F;opt&#x2F; | sort</code></pre>\n<h4 id=\"2、找到-test目录下所有大于1G的-log文件删除\"><a href=\"#2、找到-test目录下所有大于1G的-log文件删除\" class=\"headerlink\" title=\"2、找到/test目录下所有大于1G的.log文件删除\"></a>2、找到/test目录下所有大于1G的.log文件删除</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">find &#x2F;test -name &quot;*.log&quot; -size +1024M -exec rm -rf &#123;&#125; \\;</code></pre>\n\n<h2 id=\"3-处理日志\"><a href=\"#3-处理日志\" class=\"headerlink\" title=\"3.处理日志\"></a>3.处理日志</h2><p>包括：</p>\n<ul>\n<li>1、日志内容筛选与编辑;正则匹配，命令行高亮显示</li>\n<li>2、日志文件切割与批处理</li>\n</ul>\n<p><strong>使用到的命令：split cat grep awk sed</strong></p>\n<h3 id=\"3-1-使用的命令\"><a href=\"#3-1-使用的命令\" class=\"headerlink\" title=\"3-1.使用的命令\"></a>3-1.使用的命令</h3><h4 id=\"split命令切割文件\"><a href=\"#split命令切割文件\" class=\"headerlink\" title=\"split命令切割文件\"></a>split命令切割文件</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#用法\nsplit [-b ][-C ][-][-l ][要切割的文件][输出文件名前缀][-a ]\n#常用参数：\n-b: 指定拆分文件大小，也可以指定 K、M、G、T 等单位\n-l: 指定每多少行要拆分成一个文件\n-d: 使用数字作为拆分文件的后缀\n-a: 指定后缀长度\n# 将test.log拆分成每个文件大小不超过1M，且命名采用test_01,test_02...的文件\nsplit -b 1M -d test.log test_\n# 将test.log拆分成每个文件不超过100行，且命名采用test_01,test_02...的文件\nsplit -l 100 -d test.log test_</code></pre>\n<h4 id=\"tail命令分析日志文件\"><a href=\"#tail命令分析日志文件\" class=\"headerlink\" title=\"tail命令分析日志文件\"></a>tail命令分析日志文件</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#常用参数：\n-f: 根据文件描述符追踪\n-F: 根据文件名追踪\n-n: 输出文件最后n行，而不是默认的最后10行\n--pid: 与-f结合使用，在PID终止后结束 --\n-q: 不输出文件名\n-s: 与-f结合使用，-s&#x3D;n：每次输出间隔n秒\n-v: 输出文件名\n# 输出test.log\ntail -f test.log\n# 输出test.log和error.log\ntail -f test.log error.log\n# 输出test.log中最后200行的内容\ntail -n 200 test.log</code></pre>\n<h4 id=\"与head、grep、正则的配合使用\"><a href=\"#与head、grep、正则的配合使用\" class=\"headerlink\" title=\"与head、grep、正则的配合使用\"></a>与head、grep、正则的配合使用</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#head常用参数\n-n: 显示起始的n行，非默认的10行\n-v: 显示文件名\n-q: 不显示文件名\n#grep常用参数\n-v: 不包含匹配的所有行\n-c: 计算符合匹配的列数\n-w: 只显示完整匹配的结果，不包括部分匹配，比如匹配要求是apple，则只有准确地为apple的内容会返回\n-e: 后面接正则条件，一个参数只能加一个条件\n-E: 后面接正则条件，一个参数可以加多个条件\n-i: 忽略大小写\n-o: 只显示匹配pattern的部分\n-n: 输出内容时添加结果所在的行号\n-r: 递归匹配\n-color: -color&#x3D;auto &#x2F; always &#x2F; never;\n#a,b的意义分别表示加颜色的方式和颜色值\nexport GREP_COLOR&#x3D;&#39;a;b&#39;\n#a取值范围:【0,1,4,5,7,8】 0关闭所有属性; 1设置高亮度; 4下划线; 5闪烁; 7反显; 8消隐; \n#b取值范围:【30-37或40-47】30 black 31 red 32 green 33 yellow 34 blue 35 purple 36 cyan 37 white 30—37 设置前景色 40—47 设置背景色\n-A: 打印出紧随匹配的行之后的下文 NUM 行\n-B: 打印出匹配的行之前的上文 NUM 行\n-C: 打印出匹配的行的上下文前后各 NUM 行\n\n#pattern的常用参数\n\n# 输出test.log的第100行到第200行\ncat test.log | head -n 200 | tail -n 100\n# 持续输出test.log中包含”Listener“的行\ntail -f jmeter.log | grep &quot;Listener&quot;</code></pre>\n\n<h4 id=\"awk处理列数据\"><a href=\"#awk处理列数据\" class=\"headerlink\" title=\"awk处理列数据\"></a>awk处理列数据</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#用法 pattern：匹配内容；action：找到匹配后对每一行执行的操作\nawk &#39;&#123;pattern + action&#125;&#39; &#123;filenames&#125;\n#内置变量：\n$0: 整行\n$1~n: 第n列\nNF: 字段数量\nNR: 行数\nFS: -F 分隔字段符号，可以传一个或多个\nBEGIN和END模块\n#输出test.log的第100行到第200行使用awk实现\nawk &#39;&#123;if(NR&gt;100 &amp;&amp; NR&lt;200)print $0 &#125;&#39; test.log\n#输出test.log中带有https的行中第二列是200的内容\ncat test.log | grep -w &#39;https&#39; | awk &#39;&#123;if ($2 &#x3D;&#x3D; 200)print&#125;&#39;\n#统计test.log中带有https的行中第二列是200的数量\n## 注意在加入BEGIN和END语句之后，不要忘记分号\ncat test.log | grep -w &#39;https&#39; | awk &#39;&#123;count++;if ($2 &#x3D;&#x3D; 200);&#125; END&#123;print &quot;total 200 is&quot;,count&#125;&#39;\n# \n</code></pre>\n<h4 id=\"sed处理行数据、替换数据\"><a href=\"#sed处理行数据、替换数据\" class=\"headerlink\" title=\"sed处理行数据、替换数据\"></a>sed处理行数据、替换数据</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#用法：\n\n#常用参数：\n</code></pre>\n\n<h3 id=\"3-2-场景\"><a href=\"#3-2-场景\" class=\"headerlink\" title=\"3-2.场景\"></a>3-2.场景</h3><h4 id=\"1、切割test-log-找出某个日期之后的日志内容\"><a href=\"#1、切割test-log-找出某个日期之后的日志内容\" class=\"headerlink\" title=\"1、切割test.log,找出某个日期之后的日志内容\"></a>1、切割test.log,找出某个日期之后的日志内容</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#获取某个日期所在的行数num,使用grep的-n参数显示目标行号\ncat test.log | grep -n &quot;2022-01-27 15:00:00&quot;\n#切割文件,前缀test，后缀数字\nsplit -l num test.log -d test_</code></pre>\n<h4 id=\"1、匹配输出test-log中带有https的行并高亮显示\"><a href=\"#1、匹配输出test-log中带有https的行并高亮显示\" class=\"headerlink\" title=\"1、匹配输出test.log中带有https的行并高亮显示\"></a>1、匹配输出test.log中带有https的行并高亮显示</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 这里grep使用-w参数为了过滤带有http的行，只匹配完全是https的行\ntail -f test.log | grep -w &quot;https&quot; --color&#x3D;auto</code></pre>\n<h4 id=\"2、统计Nginx日志中访问量前10的IP\"><a href=\"#2、统计Nginx日志中访问量前10的IP\" class=\"headerlink\" title=\"2、统计Nginx日志中访问量前10的IP\"></a>2、统计Nginx日志中访问量前10的IP</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"># 注意参数-n，不使用-n参数会得到错误的结果\n\nawk &#39;&#123;a[$1]++&#125; END&#123;for(i in a)print i,a[i]&#125;&#39; access.log | sort -n -r -k 2 | head -10 </code></pre>\n<h4 id=\"3、统计Nginx日志中访问超过10次的IP\"><a href=\"#3、统计Nginx日志中访问超过10次的IP\" class=\"headerlink\" title=\"3、统计Nginx日志中访问超过10次的IP\"></a>3、统计Nginx日志中访问超过10次的IP</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">awk &#39;&#123;a[$1]++&#125; END&#123;for(i in a)&#123;if(a[i]&gt;10)print i,a[i]&#125;&#125;&#39; access.log | sort -nr -k 2 </code></pre>\n<h4 id=\"4、统计Nginx日志中每个IP访问结果状态码的数量\"><a href=\"#4、统计Nginx日志中每个IP访问结果状态码的数量\" class=\"headerlink\" title=\"4、统计Nginx日志中每个IP访问结果状态码的数量\"></a>4、统计Nginx日志中每个IP访问结果状态码的数量</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#方法一，使用awk统计\nawk &#39;&#123;a[$1&quot; &quot;$13]++&#125;END&#123;for(i in a)print i,a[i]&#125;&#39; access.log | sort -r\n#方法二，使用uniq做去重和统计\nawk &#39;&#123;print $1 &quot; &quot;$13&#125;&#39; access.log | sort -r | uniq -c</code></pre>\n<h4 id=\"5、处理sql文件，统一替换sql中的数据库名字\"><a href=\"#5、处理sql文件，统一替换sql中的数据库名字\" class=\"headerlink\" title=\"5、处理sql文件，统一替换sql中的数据库名字\"></a>5、处理sql文件，统一替换sql中的数据库名字</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"></code></pre>\n<h4 id=\"6、处理sql文件，删除所有注释行\"><a href=\"#6、处理sql文件，删除所有注释行\" class=\"headerlink\" title=\"6、处理sql文件，删除所有注释行\"></a>6、处理sql文件，删除所有注释行</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"></code></pre>\n\n<h2 id=\"4-端口、进程操作\"><a href=\"#4-端口、进程操作\" class=\"headerlink\" title=\"4.端口、进程操作\"></a>4.端口、进程操作</h2><h4 id=\"lsof命令\"><a href=\"#lsof命令\" class=\"headerlink\" title=\"lsof命令\"></a>lsof命令</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#常用参数\n-a：列出打开文件存在的进程；\n-c&lt;进程名&gt;：列出指定进程所打开的文件；\n+d&lt;目录&gt;：列出目录下被打开的文件；\n+D&lt;目录&gt;：递归列出目录下被打开的文件；\n-i&lt;条件&gt;：列出符合条件的进程。（4、6、协议、:端口、 @ip ）\n -p&lt;进程号&gt;：列出指定进程号所打开的文件；\n #示例1 显示所有打开的端口 \nlsof -i \n#示例2 显示所有打开80端口的进程\nlsof -i:80\n#示例3 查看被pid为2300打开的文件\nlsof -p 2300</code></pre>\n<h4 id=\"netstat\"><a href=\"#netstat\" class=\"headerlink\" title=\"netstat\"></a>netstat</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#用法\nnetstat [-acCeFghilMnNoprstuvVwx][-A][--ip]\n#常用参数\n-a: 显示所有\n-t: 显示TCP端口\n-u: 显示UDP端口\n-p: 显示使用端口的程序名称\n-n: 直接使用ip地址，而不通过域名服务器DNS\n-l: 显示监控中的服务器的Socket\n-i: 显示网络界面信息表单\n#示例 显示所有监听状态的TCP端口，且显示程序名\nnetstat -atnlp\n#示例2 显示9000端口的占用情况\nnetstat -anl | grep 9000\n#示例3 显示mysql服务的端口占用情况\nnetstat -anl | grep mysql</code></pre>\n<h2 id=\"5-crontab定时任务\"><a href=\"#5-crontab定时任务\" class=\"headerlink\" title=\"5.crontab定时任务\"></a>5.crontab定时任务</h2><h2 id=\"6-自定义快捷命令\"><a href=\"#6-自定义快捷命令\" class=\"headerlink\" title=\"6.自定义快捷命令\"></a>6.自定义快捷命令</h2><p>编写shell函数的sh文件，将路径放在当前shell的环境变量下，即可在命令行中通过命令的形式调用函数</p>\n<h2 id=\"7-其他常规操作\"><a href=\"#7-其他常规操作\" class=\"headerlink\" title=\"7.其他常规操作\"></a>7.其他常规操作</h2><h2 id=\"8-其他提高效率的用法\"><a href=\"#8-其他提高效率的用法\" class=\"headerlink\" title=\"8.其他提高效率的用法\"></a>8.其他提高效率的用法</h2><h3 id=\"alias命令\"><a href=\"#alias命令\" class=\"headerlink\" title=\"alias命令\"></a>alias命令</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#给常用的一些命令起别名\nalias findBigFile&#x3D;&#39;find &#x2F; -type f -mtime -7 -name &quot;*.log&quot;&#39;\n#后面可以运行findBigFile运行找到大文件的命令\n#查看所有别名\nalias\n#取消别名\nunalias 别名\n#别名永久生效\nvi ~&#x2F;.bashrc alias 别名&#x3D;&#39;命令&#39;\nsource .bashrc</code></pre>\n<h3 id=\"watch命令\"><a href=\"#watch命令\" class=\"headerlink\" title=\"watch命令\"></a>watch命令</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"></code></pre>\n<h3 id=\"pgrep命令\"><a href=\"#pgrep命令\" class=\"headerlink\" title=\"pgrep命令\"></a>pgrep命令</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"></code></pre>\n<h3 id=\"stat命令\"><a href=\"#stat命令\" class=\"headerlink\" title=\"stat命令\"></a>stat命令</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\"></code></pre>\n<h3 id=\"网络相关命令\"><a href=\"#网络相关命令\" class=\"headerlink\" title=\"网络相关命令\"></a>网络相关命令</h3><h4 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#常用参数\n-c: 设置要求回应的次数\n-s: 设置数据包大小，单位字节\n-t: 设置TTL的大小\n-S: 制定IP地址，通常用于不止一个IP地址的主机\n#示例: ping baidu.com 5次，每次数据包大小1024字节 TTL大小255\nping -c 5 -s 1024 -t 255 baidu.com\n#示例：使用主机上的192.168.1.123地址ping baidu.com\nping -S 192.168.1.123 baidu.com</code></pre>\n<h4 id=\"查询内网IP\"><a href=\"#查询内网IP\" class=\"headerlink\" title=\"查询内网IP\"></a>查询内网IP</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#方法一\nip addr\n#方法二\nifconfig\n#方法三\nhostname -I</code></pre>\n<h4 id=\"查询公网IP\"><a href=\"#查询公网IP\" class=\"headerlink\" title=\"查询公网IP\"></a>查询公网IP</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#方法一\ncurl cip.cc\n#方法二\ncurl ip.sb</code></pre>\n<h4 id=\"查看路由表\"><a href=\"#查看路由表\" class=\"headerlink\" title=\"查看路由表\"></a>查看路由表</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">route</code></pre>\n<h4 id=\"查看DNS命令\"><a href=\"#查看DNS命令\" class=\"headerlink\" title=\"查看DNS命令\"></a>查看DNS命令</h4><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">cat &#x2F;etc&#x2F;resolv.conf</code></pre>\n<h3 id=\"exec、管道符、xargs的区别\"><a href=\"#exec、管道符、xargs的区别\" class=\"headerlink\" title=\"exec、管道符、xargs的区别\"></a>exec、管道符、xargs的区别</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#exec\n- 要结合&#123;&#125;;来用, &#123;&#125;表示前面查询的结果;结束符\\;\n- 参数是一个一个传递的，传递一个参数执行一次\n- 文件名有空格等特殊字符也能处理\n\n#|（管道）\n- 将前面每一个进程的输出直接作为下一个进程的输入\n- 需要管道符后面的命令支持标准输入 \n#支持管道的常用命令\ngrep\nsort\nuniq\nwc\nxargs\n\n#xargs\n- 将前一个命令的输出作为命令行参数传给后面的命令</code></pre>\n<p>示例</p>\n<pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">find . -name &quot;*.log&quot;\n\n#exec处理，删除所有find找到的log文件，逐个执行echo\nfind . -name &quot;*.log&quot; -exec echo &#123;&#125;\\;\n\n#管道处理，将结果一次性传给echo，只执行一次\nfind . -name &quot;*.log&quot; | xargs echo\n\necho不支持管道输入，不能直接使用 | echo，需要配合xargs使用</code></pre>\n<h3 id=\"telnet\"><a href=\"#telnet\" class=\"headerlink\" title=\"telnet\"></a>telnet</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#检查端口的连通性的几种方式\n#ssh -v 调试模式(会打印日志)-p 指定端口\nssh -v -p port username@ip\ntelnet ip port\ncurl ip:port\nwget ip:port</code></pre>\n<h3 id=\"curl\"><a href=\"#curl\" class=\"headerlink\" title=\"curl\"></a>curl</h3><pre class=\"line-numbers language-shell\" data-language=\"shell\"><code class=\"language-shell\">#常用参数\n-I: 显示 HTTP 头，而不显示文件内容\n-i: 同时显示 HTTP 头和文件内容\n-d: 用于指定发送的数据，用于Post请求\n#示例1\ncurl -i https:&#x2F;&#x2F;www.baidu.com\n#示例2\ncurl -d &quot;data&quot; https:&#x2F;&#x2F;www.baidu.com</code></pre>","text":"常用场景包括： 1、查看Linux的版本、cpu、内存、磁盘等信息 2、查看磁盘占用，查找文件和目录，处理大文件 3、处理日志 4、端口、进程相关操作 5、crontab定时任务 6、自定义快捷命令 7、常见环境配置：防火墙、免登陆、yum、时间、JDK等 8、其他提高效率的命令...","link":"","photos":[],"count_time":{"symbolsCount":"7.3k","symbolsTime":"7 mins."},"categories":[{"name":"Linux","slug":"Linux","count":2,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":2,"path":"api/tags/Linux.json"},{"name":"Shell","slug":"Shell","count":1,"path":"api/tags/Shell.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">常用场景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E6%9F%A5%E7%9C%8B%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">1.查看基础信息</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">查看系统信息</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8BCPU%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">查看CPU信息</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E5%86%85%E5%AD%98\"><span class=\"toc-text\">查看内存</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E5%A4%84%E7%90%86%E7%A3%81%E7%9B%98%E3%80%81%E5%A4%A7%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">2.处理磁盘、大文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-1-%E4%BD%BF%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">2-1.使用的命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#find%E5%91%BD%E4%BB%A4%E6%9F%A5%E6%89%BE%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">find命令查找目录和文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E4%B8%8E%E6%AD%A3%E5%88%99%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">与正则配合使用</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#du%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6%E7%9A%84%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E7%A9%BA%E9%97%B4\"><span class=\"toc-text\">du命令查看目录和文件的磁盘使用空间</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#df%E5%91%BD%E4%BB%A4%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E4%B8%AD%E7%9A%84%E5%8F%AF%E7%94%A8%E7%A9%BA%E9%97%B4\"><span class=\"toc-text\">df命令查看磁盘中的可用空间</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#sort%E6%8E%92%E5%BA%8F\"><span class=\"toc-text\">sort排序</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#uniq%E5%8E%BB%E9%87%8D\"><span class=\"toc-text\">uniq去重</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-2-%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">2-2.场景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%BD%93%E5%89%8D%E7%A3%81%E7%9B%98%E6%BB%A1%E4%BA%86%EF%BC%8C%E9%9C%80%E8%A6%81%E5%AE%9A%E4%BD%8D%E5%A4%A7%E6%96%87%E4%BB%B6%E5%B9%B6%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">1、当前磁盘满了，需要定位大文件并删除</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2%E3%80%81%E6%89%BE%E5%88%B0-test%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E5%A4%A7%E4%BA%8E1G%E7%9A%84-log%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">2、找到&#x2F;test目录下所有大于1G的.log文件删除</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E5%A4%84%E7%90%86%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">3.处理日志</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-1-%E4%BD%BF%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">3-1.使用的命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#split%E5%91%BD%E4%BB%A4%E5%88%87%E5%89%B2%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">split命令切割文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#tail%E5%91%BD%E4%BB%A4%E5%88%86%E6%9E%90%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">tail命令分析日志文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%B8%8Ehead%E3%80%81grep%E3%80%81%E6%AD%A3%E5%88%99%E7%9A%84%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">与head、grep、正则的配合使用</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#awk%E5%A4%84%E7%90%86%E5%88%97%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">awk处理列数据</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#sed%E5%A4%84%E7%90%86%E8%A1%8C%E6%95%B0%E6%8D%AE%E3%80%81%E6%9B%BF%E6%8D%A2%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">sed处理行数据、替换数据</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-2-%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">3-2.场景</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%88%87%E5%89%B2test-log-%E6%89%BE%E5%87%BA%E6%9F%90%E4%B8%AA%E6%97%A5%E6%9C%9F%E4%B9%8B%E5%90%8E%E7%9A%84%E6%97%A5%E5%BF%97%E5%86%85%E5%AE%B9\"><span class=\"toc-text\">1、切割test.log,找出某个日期之后的日志内容</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%8C%B9%E9%85%8D%E8%BE%93%E5%87%BAtest-log%E4%B8%AD%E5%B8%A6%E6%9C%89https%E7%9A%84%E8%A1%8C%E5%B9%B6%E9%AB%98%E4%BA%AE%E6%98%BE%E7%A4%BA\"><span class=\"toc-text\">1、匹配输出test.log中带有https的行并高亮显示</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2%E3%80%81%E7%BB%9F%E8%AE%A1Nginx%E6%97%A5%E5%BF%97%E4%B8%AD%E8%AE%BF%E9%97%AE%E9%87%8F%E5%89%8D10%E7%9A%84IP\"><span class=\"toc-text\">2、统计Nginx日志中访问量前10的IP</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3%E3%80%81%E7%BB%9F%E8%AE%A1Nginx%E6%97%A5%E5%BF%97%E4%B8%AD%E8%AE%BF%E9%97%AE%E8%B6%85%E8%BF%8710%E6%AC%A1%E7%9A%84IP\"><span class=\"toc-text\">3、统计Nginx日志中访问超过10次的IP</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4%E3%80%81%E7%BB%9F%E8%AE%A1Nginx%E6%97%A5%E5%BF%97%E4%B8%AD%E6%AF%8F%E4%B8%AAIP%E8%AE%BF%E9%97%AE%E7%BB%93%E6%9E%9C%E7%8A%B6%E6%80%81%E7%A0%81%E7%9A%84%E6%95%B0%E9%87%8F\"><span class=\"toc-text\">4、统计Nginx日志中每个IP访问结果状态码的数量</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5%E3%80%81%E5%A4%84%E7%90%86sql%E6%96%87%E4%BB%B6%EF%BC%8C%E7%BB%9F%E4%B8%80%E6%9B%BF%E6%8D%A2sql%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E5%AD%97\"><span class=\"toc-text\">5、处理sql文件，统一替换sql中的数据库名字</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6%E3%80%81%E5%A4%84%E7%90%86sql%E6%96%87%E4%BB%B6%EF%BC%8C%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E6%B3%A8%E9%87%8A%E8%A1%8C\"><span class=\"toc-text\">6、处理sql文件，删除所有注释行</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-%E7%AB%AF%E5%8F%A3%E3%80%81%E8%BF%9B%E7%A8%8B%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">4.端口、进程操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#lsof%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">lsof命令</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#netstat\"><span class=\"toc-text\">netstat</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-crontab%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1\"><span class=\"toc-text\">5.crontab定时任务</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">6.自定义快捷命令</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-%E5%85%B6%E4%BB%96%E5%B8%B8%E8%A7%84%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">7.其他常规操作</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-%E5%85%B6%E4%BB%96%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87%E7%9A%84%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">8.其他提高效率的用法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#alias%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">alias命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#watch%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">watch命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#pgrep%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">pgrep命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#stat%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">stat命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">网络相关命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ping\"><span class=\"toc-text\">ping</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E5%86%85%E7%BD%91IP\"><span class=\"toc-text\">查询内网IP</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E5%85%AC%E7%BD%91IP\"><span class=\"toc-text\">查询公网IP</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8\"><span class=\"toc-text\">查看路由表</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E7%9C%8BDNS%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">查看DNS命令</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#exec%E3%80%81%E7%AE%A1%E9%81%93%E7%AC%A6%E3%80%81xargs%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">exec、管道符、xargs的区别</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#telnet\"><span class=\"toc-text\">telnet</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#curl\"><span class=\"toc-text\">curl</span></a></li></ol></li></ol></li></ol>","author":{"name":"Shepard","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"求道者","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Git基础操作","uid":"94eac58137c582610fa66d5e01c061b5","slug":"Git基础操作","date":"2022-01-27T07:58:57.000Z","updated":"2022-01-28T01:54:21.089Z","comments":true,"path":"api/articles/Git基础操作.json","keywords":null,"cover":"https://tianmy.oss-cn-shanghai.aliyuncs.com/img/git.jpg","text":"","link":"","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[{"name":"Git","slug":"Git","count":1,"path":"api/categories/Git.json"}],"tags":[{"name":"分支管理","slug":"分支管理","count":1,"path":"api/tags/分支管理.json"},{"name":"版本管理","slug":"版本管理","count":1,"path":"api/tags/版本管理.json"}],"author":{"name":"Shepard","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"求道者","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"测试中的Python多线程实践","uid":"6026292b9a114dd7e9230f64f6ee9341","slug":"测试中的Python多线程实践","date":"2022-01-26T08:36:49.000Z","updated":"2022-01-26T08:38:54.894Z","comments":true,"path":"api/articles/测试中的Python多线程实践.json","keywords":null,"cover":"hhttps://tianmy.oss-cn-shanghai.aliyuncs.com/img/python.jpg","text":"","link":"","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[{"name":"Python","slug":"Python","count":10,"path":"api/categories/Python.json"}],"tags":[{"name":"多线程","slug":"多线程","count":1,"path":"api/tags/多线程.json"}],"author":{"name":"Shepard","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"求道者","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}